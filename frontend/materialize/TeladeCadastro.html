

<html>

<head>
	<title>Tela de Cadastro</title>
				<link rel="stylesheet" type="text/css" href="assets/css/styleslogin.css">
				</link>

				<link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

				<link rel="shortcut icon" href="official.ico" type="image/x-icon" />
				<meta name="viewport" content="width=device-width, initial-scale=1.0">
				<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<!-- FUNÇÃO DE VERIFICAÇÃO DE EMAIL -->

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="Javascript">
function validacaoEmail(field) {
usuario = field.value.substring(0, field.value.indexOf("@"));
dominio = field.value.substring(field.value.indexOf("@")+ 1, field.value.length);

if ((usuario.length >=1) &&
    (dominio.length >=3) && 
    (usuario.search("@")==-1) && 
    (dominio.search("@")==-1) &&
    (usuario.search(" ")==-1) && 
    (dominio.search(" ")==-1) &&
    (dominio.search(".")!=-1) &&      
    (dominio.indexOf(".") >=1)&& 
    (dominio.lastIndexOf(".") < dominio.length - 1)) {

document.getElementById("msgemail").innerHTML="E-mail valido";
alert("E-mail valido");
}
else{
document.getElementById("msgemail").innerHTML="<font color='red'>E-mail invalido </font>";
alert("E-mail invalido");
}
}

</script>
</head>


<body>

		<form name="veri_email">
	  	<hr color='gray'>

			<div class="containercadastro">
				<img src="assets/images/uwlogo.gif">
				<form>
				
					<div class="form-input">
						 <input class="input-form" type="text" name="firstname" placeholder="Coloque seu nome completo">
					</div>

					<div class="form-input">
						 <input class="input-form" type="text" name="lastname" placeholder="Coloque seu nome completo">
					</div>

					<div class="form-input">
						<input class="input-form" type="password" name="password" placeholder="Coloque sua senha">
					</div>

					<!--<div class="form-input">
						<input class="input-form" type="text" name="cpf" placeholder="Insira seu CPF">
					</div>0-->

					<div class="form-input">
						<input class="input-form" type="text" name="email" onblur=" validacaoEmail(veri_email.email)" placeholder="Insira seu email">
						<div id="msgemail"></div>
					</div>

					

					
					<br>
					<a href="TeladeCadastroEmpresa.html">Cadastre-se como empresa</a>
				</form>
				<button class="btn-login" id="botao_submit">CADASTRE-SE COMO USUARIO</button>
			</div>





<script src="https://code.jquery.com/jquery-3.2.0.min.js"> </script> 
<script type="text/javascript">



function enviar_dados(dados, callback){
	$.ajax({
		type: "POST",
		url: "http://localhost:8000/backend/user/register",
		data: dados,
		success: callback,
		dataType: 'json'
	});
}

function pegar_dados_campos(){
	var inputs = document.getElementsByClassName("input-form")
	var objeto = {}
	for (var i = 0; i < inputs.length; i++) {
		objeto[inputs[i].name] = inputs[i].value
	}
	return objeto;
}

document.getElementById("botao_submit").addEventListener("click", function(){
	var dados_em_json = JSON.stringify(pegar_dados_campos())
	//console.log(dados_em_json)
	enviar_dados(dados_em_json, function(response){
		window.alert(response)
		//console.log(response)
	})
})

</script>

</body>

</html>

