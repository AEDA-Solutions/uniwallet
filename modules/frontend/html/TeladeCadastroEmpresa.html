<!-- Tela de Cadastro Empresa-->


<html>

<head>
  <title>Tela de Cadastro Empresa</title>
        <link rel="stylesheet" type="text/css" href="{static}assets\css\styleslogin1.css">
        </link>

        <link rel="stylesheet" type="text/css" href="{static}assets\css\font-awesome.css">

        <link rel="shortcut icon" href="official.ico" type="image/x-icon" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--      Função JavaScript para validação de e-mail                             -->


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> Validação de E-mail com JavaScript</title>
<script language="Javascript">
function validacaoEmail(field) {
usuario = field.value.substring(0, field.value.indexOf("@"));
dominio = field.value.substring(field.value.indexOf("@")+ 1, field.value.length);
if ((usuario.length >=1) &&
    (dominio.length >=3) && 
    (usuario.search("@")==-1) && 
    (dominio.search("@")==-1) &&
    (usuario.search(" ")==-1) && 
    (dominio.search(" ")==-1) &&
    (dominio.search(".")!=-1) &&      
    (dominio.indexOf(".") >=1)&& 
    (dominio.lastIndexOf(".") < dominio.length - 1)) {
document.getElementById("msgemail").innerHTML="";
}
else{
document.getElementById("msgemail").innerHTML="<font color='red'>Email inválido </font>";
alert("E-mail invalido");
}
}
</script>


</head>


<body>


    <form name="veri_email">
      <hr color='gray'>




      <div class="containercadastro">
        <img src="{static}assets\images\uwlogo.gif">
        <form>

          <div class="form-input">
             <input type="text" name="compname" placeholder="Coloque o nome da empresa">
          </div>

           <div class="form-input">
            <input type="cadastroemp" name="email" onblur=" validacaoEmail(veri_email.email)" placeholder="Insira o email da empresa">
            <div id="msgemail"></div>

          </div>

            <div class="form-input">
            <input type="text" name="location" placeholder="Insira o local da sua empresa">
          </div>

          <div class="form-input">
            <input type="text" name="password" placeholder="Coloque a senha desejada">
          </div>

          <div class="form-input">
            <input type="text" name="phone" style="font-size: 14px;" placeholder="Insira o telefone de contato da empresa">
          </div>

          <div class="form-input">
            <input type="ncpf" name="cnpj" placeholder="Insira o CNPJ da empresa">
          </div>

          <h3>Selecione o ramo de vendas da empresa:</h3>
          <form method="post" action="cadastrar-enquete.php">
          <select name="Ramo de vendas">
          <option value="Alim">Alimentos</option>
          <option value="Roup">Roupas</option>
          <option value="Livro">Livros</option>
          <option value="Outros">Outros</option>
          </select>

<br>
<br>
          <input type="submit" name="submit" value="CADASTRE-SE COMO EMPRESA" class="btn-login">
          <br>
          <a href="#">Cadastre-se como usuario</a>
        </fomr>
      </div>


<script src="https://code.jquery.com/jquery-3.2.0.min.js"> </script> 
<script type="text/javascript">



function enviar_dados(dados, callback){
  $.ajax({
    type: "POST",
    url: "http://localhost:8000/backend/user/register",
    data: dados,
    success: callback,
    dataType: 'json'
  });
}

function pegar_dados_campos(){
  var inputs = document.getElementsByClassName("input-form")
  var objeto = {}
  for (var i = 0; i < inputs.length; i++) {
    objeto[inputs[i].name] = inputs[i].value
  }
  return objeto;
}

document.getElementById("botao_submit").addEventListener("click", function(){
  var dados_em_json = JSON.stringify(pegar_dados_campos())
  //console.log(dados_em_json)
  enviar_dados(dados_em_json, function(response){
    window.alert(response)
    //console.log(response)
  })
})

</script>

</body>

</html>

