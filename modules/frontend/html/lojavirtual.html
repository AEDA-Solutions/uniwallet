<!DOCTYPE html> 

<html lang="pt-br"> 

<head>  
		<meta charset="utf-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">     
		<title> Loja </title>  
		<link rel="stylesheet" href="{static}assets/css/materialize.css"> 
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="{static}assets/css/lojavirtual.css">
</head> 
  
<header class="navbar-fixed">

  <ul id="dropdown1" class="dropdown-content">
    <li><a href="usuario">Configurações</a></li>
    <li class="divider"></li>
    <li><a href="#modal1">Financeiro</a></li>
  </ul>
  
  <nav class="blue-grey darken-2">

       <div class="navbar-wrapper">
       <!-- Logo -->
        <a href="inicial" class="brand-logo"><img src="{static}assets/images/uwtrans1.png" class="left mini-logo"></img></a>

        <ul class="right hide-on-med-and-down">
        <li>
        <a class="dropdown-button" href="#" data-activates="dropdown1">Perfil de Usuario<i class="material-icons left">perm_identity</i></a></li>

        <li><a href="inicial">Sair<i class="material-icons left">input</i></a></li>
        </ul>

        <div class="nav-wrapper">
        <form>
        <div class="input-field">
          <input id="search" type="search" required>
          <label class="label-icon" for="search"><i class="material-icons">search</i></label>
          <i class="material-icons">close</i>
        </div>
        </form>
        </div>
        </div>

  </nav>

</header>

      <div class="row">
      <div class="col s12 m4 l3">

      <!--MODAL DO PERFIL DE USUARIO-->
      <div id="modal1" class="modal">
      <div class="modal-content">
          <h4>Informações Gerais</h4>
      
      <!-- INFORMAÇÕES DE EXTRATO E CONVERSOR-->
      <ul class="collapsible popout" data-collapsible="accordion">
      <li>
        <div class="collapsible-header"><i class="material-icons">assessment</i>Extrato</div>
        <div class="collapsible-body"><span>
          
          <table class="centered">
              <thead>
                <tr>
                    <th>Data</th>
                    <th>Categoria</th>
                    <th>Valor</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>21/04/2017</td>
                  <td>Refeição</td>
                  <td>U$300,00</td>
                </tr>
                <tr>
                  <td>22/05/2017</td>
                  <td>Depósito</td>
                  <td>U$1000,00</td>
                  
                </tr>
                <tr>
                  <td>23/07/2017</td>
                  <td>Papelaria</td>
                  <td>U$500,00</td>
                </tr>
              </tbody>
        </table>

        </span></div>
      </li>
      <li>
        <div class="collapsible-header"><i class="material-icons">swap_vert</i>Converter UniCoins</div>
        <div class="collapsible-body"><span>
         
        <div class="container">
        <div class="form-input">
        <input class="input-form" type="text" name="fullname" size=30 minlenght=3 maxlength=50 placeholder="Insira seu Investimento">
        </div>

        <div class="form-input">
        <input class="input-form" type="text" name="price" placeholder="Arrecadado">
        </div>

        <div class="botao-sup">
        <div class="col s6"><input type="submit" name="submit" value="Converter" class="btn"></div>
        </div>

        </div> 


        </span></div>
      </li>
      </ul>
        

      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Fechar</a>
      </div>
      </div>

      <div class="row">

      <!-- INFORMAÇÕES DO USUARIO-->
      <ul class="collection">
      <li class="collection-item avatar">
      <i class="material-icons circle">perm_identity</i>
      <span id="nomeusuario" class="title">Cliente</span>
      <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
      </li>
      </ul>

      <!-- SALDO -->
      <div class="botao-sup">
      <div class="col s6"><input type="submit" name="submit" value="Saldo" class="btn-conFace"></div>
      </div>

      </div>
      
      <!--MENU DE REDIRECIONAMETO-->
      <div class="input-field col s12" id="category">
        <select id="categoria">
            <option value="" disabled selected>Categoria</option>
        </select>
      </div>

      <div class="input-field col s12">
        <select>
            <option value="" disabled selected></option>
            <option value="1">ICC Norte</option>
            <option value="2">ICC Sul</option>
            <option value="3">Amarelinho BSAN</option>
        </select>
         <label><br>Localização<br></label>
      </div>

      <!-- MENU PRINCIPAL-->
      <div class="input-field col s12">
        <select id="nome_empresa">
            <option value="" disabled selected>Empresa</option>
        </select>

      </div>

    <div class="input-field col s12">
        <select>
            <option value="" disabled selected></option>
            <option value="1">R$0,01 - R$5,00</option>
            <option value="2">R$5,01 - R$20,00</option>
            <option value="3">R$20,01 ou mais</option>
        </select>
      <label><br>Preço<br></label>
      </div>  

    </div>

    <div class="col s12 m8 l9"> 

    <ul class="collapsible" data-collapsible="accordion">
    <li>
    <div class="collapsible-header"><i class="material-icons">shopping_cart</i>Carrinho de Compras</div>
    <div class="collapsible-body"><span>
      
      <table class="centered">
        
        <thead>
          
          <tr>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Total</th>
          </tr>
        
        </thead>

        <tbody id="corpo">
          
  
          <tr>
            <td>Coxinha (Loja do zé)</td>
            <td>
              <select class="input-field col s4 offset-s4">
                <option value="" disabled selected>Quantidade</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select></td>
            <td>$ 300UniCoins</td>
          
          </tr>        
          
          <tr>
            <td>coxinha</td>
            <td>
              <select class="input-field col s4 offset-s4">
                <option value="" disabled selected>Quantidade</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select></td>
            <td>TOTAL</td>
                  
                  
                
          </tr>


        </tbody>
        </table>
        
    <div class="col s6 offset-s4"><input type="submit" name="submit" value="Finalizar Compra" class="btn-conFace"></div>    
    </span>
    </li>
    </ul>

    <div class="row" id="margem">
    

    <div class="col s3">
      <div class="card small">
        <div class="card-image">
          <img src="{static}assets/images/coxinha.jpg">        
        </div>
        <div class="card-content">
          <p>Recheio de frango com catupiry</p>
          <p>R$3,00</p>
          <p>Zé da Coxinha - ICC Norte</p>
          <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
      </div>
    </div>

    <div class="col s3">
      <div class="card small">
        <div class="card-image">
          <img src="{static}assets/images/doce.jpg">
        </div>
        <div class="card-content">
          <p>Diversos</p>
          <p>R$1,50</p>
          <p>Só Doces - RU</p>
          <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
      </div>
    </div>

    <div class="col s3">
      <div class="card small">
        <div class="card-image">
          <img src="{static}assets/images/marmitas.jpg">
        </div>
        <div class="card-content">
          <p>Várias combinações</p>
          <p>R$8,00</p1>
          <p>Maria da Marmita - FT</p>  
          <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
      </div>
    </div>
      

    <div class="col s3">
      <div class="card small">
        <div class="card-image">
          <img src="{static}assets/images/coxinha.jpg">
        </div>
        <div class="card-content">
          <p>Recheio de frango com catupiry</p>
          <p>R$3,00</p>
          <p>Zé da Coxinha - ICC Norte</p>
          <button>Comprar</button>
        </div>
      </div>
    </div>

</div>
         
</div>



<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
<!--Banco de funções de JS criadas pelo back-end -->
<script src="{static}assets/js/uniwallet-backend-api.js"></script>

<script type="text/javascript">
  

  $(document).ready(function(){
    $('.collapsible').collapsible();
  });
        

</script>

<script> 
    $(document).ready(function(){
      // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
      $('.modal').modal();
      });
  </script>

  <script>
    $(function(){
        $(".button-collapse").sideNav();
      });
    </script>

<script type="text/javascript">

function card(productid, productprice){
  
  var modelo_carrinho = "<tr>\
                          <td>produto</td>\
                          <td>\
                            <select class=\"input-field col s4 offset-s4\">\
                              <option value=\"\" disabled selected>Quantidade</option>\
                              <option value=\"1\">1</option>\
                              <option value=\"2\">2</option>\
                              <option value=\"3\">3</option>\
                            </select>\
                            </td>\
                          <td>$ price UniCoins</td>\
                        </tr>\  "

  var gold = modelo_carrinho.replace("produto", productid)
  var gold2 = gold.replace("price", productprice)
  $("#corpo").append(gold2);
  console.log(document.getElementById("corpo"))



  }


Request.get("product/show_all" , function(all){
    
    
    console.log(all)
    var modelo =  " <div class= \"col s3\" > \
                      <div class=\"card\"/> \
                        <div class=\"card-image\"> \
                          <img src=\"fotinha\"> \
                        </div> \
                        <div class=\"card-content\"> \
                          <p>nome</p>\
                          <p>$ price UniCoins</p> \
                          <p>company</p> \
                          <button onclick=\"card(productid, productprice)\" class=\"waves-effect waves-light blue-grey darken-2 btn\">Comprar</button>\
                        </div> \
                      </div> \
                    </div> \ "
    console.log(modelo)
    
    var pagina = ""
    for (var i = all.content.length - 1; i >= 0; i--) {
      var nome = all.content[i].name
      var price = all.content[i].price
      var company = all.content[i].company_name
      var id = all.content[i].id
      var replace = modelo.replace("nome", nome)
      var replace2 = replace.replace("price", price)
      var replace3 = replace2.replace("company", company)
      var replace4 = replace3.replace("productid", id)
      var replace5 = replace4.replace("productprice", price)
      var pagina = pagina.concat(replace5)
      }
      console.log(pagina)
    document.getElementById("margem").innerHTML = pagina
    
function card(productid){

    }

    Request.get("category/list", function(l){
      console.log(l)
      var category = document.getElementById("categoria")
      for (var i = 0; i < l.content.length; i++) {
        category.innerHTML += HTML_Factory.make_tag('option', l.content[i].type, {"value": l.content[i].id})            
      }

      Request.get("company/list", function(l){

        var lojas = document.getElementById("nome_empresa")

        for (var i = 0; i < l.content.length; i++) {
          lojas.innerHTML += HTML_Factory.make_tag('option', l.content[i].name, {"value": l.content[i].id})            
        }

        $(document).ready(function() {
          $('select').material_select();
        }); 

      })

   })

    
  })


console.log(sessionStorage.getItem())
</script>

<script>
    
    $(document).ready(function(){
        $('.collapsible').collapsible();
    });

</script> 

</body>

</html>
